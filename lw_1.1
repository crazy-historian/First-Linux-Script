#!/bin/bash

# вторая версия скрипта

# $1 - исходная директория, $2 - директория назначения
# проверка переданных аргументов

if [ -d $1 ] && [ -d $2 ]
then
	echo "Директории существуют."
else 
	echo "Одна из переданных директорий не существует, создадим их..."
	# здесь будет создание новой директории 
	exit 1
fi 

# проверка и копирование файлов
for file in $1/*
do
	echo $(basename $file)
	# если файла нет на флешке
	flash_file=$($2/$(basename $file) )
	if [ ! -f $flash_file ]; then 
		echo "Файла нет на флешке, копирование..."
		cp $file $2

	# файл есть на флешке, его время последнего редактирование меньше, чем на пк
	elif [ -f $2/$(basename $file) ] && [ $(ls -l $file) lt $(ls -l $flash_file) ]
		echo "Обновление файла..."

	# файл есть на флешке, его время последнего редактирования больше, чем на пк 	
	elif [ $(ls -l $file) qt $(ls -l $flash_file) ]
		#  вопрос пользователю
		echo "Версия файла $flash_name на флешке актуальнее"
		echo -n "Скопировать на пк? (Д/н):"

		read answer
		case $answer in
		
    	д|Д) echo "Ввели «Да», копирование..."
			 cp $flash_file $1
        ;;
    	н|Н) echo "Ввели «Нет». Не надо, так не надо!"
        
        ;;
    	*) echo "Ничего не ввели. Выполняем действие по умолчанию..."
        ;;
		esac
		
	fi                                                                                                                                     
done




                                                     